const std = @import("std");
const hex_utils = @import("hex");
const Preset = @import("params").Preset;
const ChainConfig = @import("../chain_config.zig").ChainConfig;
const BlobScheduleEntry = @import("../chain_config.zig").BlobScheduleEntry;
const b = hex_utils.hexToBytesComptime;

pub const gnosis_chain_config = ChainConfig{
    .PRESET_BASE = Preset.gnosis,
    .CONFIG_NAME = "gnosis",

    .TERMINAL_TOTAL_DIFFICULTY = 8626000000000000000000058750000000000000000000,
    .TERMINAL_BLOCK_HASH = b(32, "0x0000000000000000000000000000000000000000000000000000000000000000"),
    .TERMINAL_BLOCK_HASH_ACTIVATION_EPOCH = std.math.maxInt(u64),

    // Genesis
    .MIN_GENESIS_ACTIVE_VALIDATOR_COUNT = 4096,
    .MIN_GENESIS_TIME = 1638968400,
    .GENESIS_FORK_VERSION = b(4, "0x00000064"),
    .GENESIS_DELAY = 6000,

    // Forking
    .ALTAIR_FORK_VERSION = b(4, "0x01000064"),
    .ALTAIR_FORK_EPOCH = 512,
    .BELLATRIX_FORK_VERSION = b(4, "0x02000064"),
    .BELLATRIX_FORK_EPOCH = 385536,
    .CAPELLA_FORK_VERSION = b(4, "0x03000064"),
    .CAPELLA_FORK_EPOCH = 648704,
    .DENEB_FORK_VERSION = b(4, "0x04000064"),
    .DENEB_FORK_EPOCH = 889856,
    .ELECTRA_FORK_VERSION = b(4, "0x05000064"),
    .ELECTRA_FORK_EPOCH = 1337856,
    .FULU_FORK_VERSION = b(4, "0x06000064"),
    .FULU_FORK_EPOCH = std.math.maxInt(u64),

    // Time parameters
    .SECONDS_PER_SLOT = 5,
    .SECONDS_PER_ETH1_BLOCK = 6,
    .MIN_VALIDATOR_WITHDRAWABILITY_DELAY = 256,
    .SHARD_COMMITTEE_PERIOD = 256,
    .ETH1_FOLLOW_DISTANCE = 1024,

    // Validator cycle
    .INACTIVITY_SCORE_BIAS = 4,
    .INACTIVITY_SCORE_RECOVERY_RATE = 16,
    .EJECTION_BALANCE = 16000000000,
    .MIN_PER_EPOCH_CHURN_LIMIT = 4,
    .MAX_PER_EPOCH_ACTIVATION_CHURN_LIMIT = 2,
    .CHURN_LIMIT_QUOTIENT = 4096,

    // Fork choice
    .PROPOSER_SCORE_BOOST = 40,
    .REORG_HEAD_WEIGHT_THRESHOLD = 20,
    .REORG_PARENT_WEIGHT_THRESHOLD = 160,
    .REORG_MAX_EPOCHS_SINCE_FINALIZATION = 2,

    // Deposit contract
    .DEPOSIT_CHAIN_ID = 100,
    .DEPOSIT_NETWORK_ID = 100,
    .DEPOSIT_CONTRACT_ADDRESS = b(20, "0x0b98057ea310f4d31f2a452b414647007d1645d9"),

    // Networking
    .MIN_EPOCHS_FOR_BLOCK_REQUESTS = 33024,

    // Deneb
    .MIN_EPOCHS_FOR_BLOB_SIDECARS_REQUESTS = 16384,
    .BLOB_SIDECAR_SUBNET_COUNT = 6,
    .MAX_BLOBS_PER_BLOCK = 2,
    .MAX_REQUEST_BLOB_SIDECARS = 768,

    // Electra
    .MAX_PER_EPOCH_ACTIVATION_EXIT_CHURN_LIMIT = 64000000000,
    .MIN_PER_EPOCH_CHURN_LIMIT_ELECTRA = 128000000000,
    .BLOB_SIDECAR_SUBNET_COUNT_ELECTRA = 2,
    .MAX_BLOBS_PER_BLOCK_ELECTRA = 2,
    .MAX_REQUEST_BLOB_SIDECARS_ELECTRA = 256,

    // Fulu
    .MIN_EPOCHS_FOR_DATA_COLUMN_SIDECARS_REQUESTS = 4096,
    .SAMPLES_PER_SLOT = 8,
    .CUSTODY_REQUIREMENT = 4,
    .NODE_CUSTODY_REQUIREMENT = 1,
    .VALIDATOR_CUSTODY_REQUIREMENT = 8,
    .BALANCE_PER_ADDITIONAL_CUSTODY_GROUP = 32000000000,

    // Blob Scheduling
    .BLOB_SCHEDULE = &[_]BlobScheduleEntry{},
};
